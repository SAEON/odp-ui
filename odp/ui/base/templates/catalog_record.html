{% extends 'base.html' %}
{% from 'catalog.j2' import render_metadata %}

{% block web_title %}
    {{ super() }} |
    {% block heading %}
        {% set datacite_metadata = record | select_datacite_metadata %}
        {{ datacite_metadata.titles[0].title }}
    {% endblock %}
{% endblock %}

{% block main %}
    <main class="flex-grow-1 m-3">
        <div class="container-md">
            {{ render_metadata(record, terms_of_use) }}
        </div>
    </main>
{% endblock %}

{% block scripts %}
    {{ super() }}
    {% set N, E, S, W = record.spatial_north, record.spatial_east, record.spatial_south, record.spatial_west %}
    {% if N is not none and E is not none and S is not none and W is not none %}
        <script>
            createExtentMap({{ N }}, {{ E }}, {{ S }}, {{ W }});
        </script>
    {% endif %}
    {% if record.doi %}
        <script>
            formatCitation('{{ record.doi }}', 'APA')
        </script>
    {% endif %}
{% endblock %}
