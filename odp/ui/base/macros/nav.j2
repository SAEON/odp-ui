{% macro navbar(
    user,
    title='SAEON | Open Data Platform',
    color='primary',
    logo='saeon-logo.png',
    logo_url='https://www.saeon.ac.za/'
) %}
    {% set dark = color in ('primary', 'dark') %}

    <nav class="navbar navbar-expand-lg bg-{{ color }} {{ 'navbar-dark' if dark }} p-3">
        <div class="container-fluid">
            <div class="d-flex flex-column">
                <a href="{{ url_for('home.index') }}" class="navbar-brand">
                    {{ title }}
                </a>
                {% if user.is_authenticated %}
                    <span class="navbar-text mt-1">Welcome, {{ user.name }}</span>
                {% endif %}
            </div>

            <div class="flex-grow-1">
                {% if caller %}
                    {{ caller() }}
                {% endif %}
            </div>

            <div class="d-flex flex-column align-items-end navbar-nav mx-5 mt-1">
                {% if user.is_authenticated %}
                    <span class="navbar-text">{{ user.email }}</span>
                    <a class="nav-link pe-0" href="{{ url_for('hydra.logout') }}">Log out</a>
                {% else %}
                    <a class="nav-link pe-0" href="{{ url_for('hydra.login') }}">Log in</a>
                {% endif %}
            </div>

            <a class="navbar-brand text-end" href="{{ logo_url }}" target="_blank">
                <img src="{{ url_for('static', filename=logo) }}" height="60">
            </a>
        </div>
    </nav>
{% endmacro %}

{% macro navbar_menu(active_view, views_row1, views_row2) %}
    <div class="navbar-nav nav-pills nav-justified flex-row">
        {% for view in views_row1 %}
            {{ nav_link(view, view == active_view) }}
        {% endfor %}
    </div>
    <div class="navbar-nav nav-pills nav-justified flex-row">
        {% for view in views_row2 %}
            {{ nav_link(view, view == active_view) }}
        {% endfor %}
    </div>
{% endmacro %}

{% macro nav_link(view, is_active) %}
    <a class="nav-link {% if is_active %} active {% endif %}"
       href="{{ url_for(view ~ '.index') }}">{{ view|title }}</a>
{% endmacro %}
